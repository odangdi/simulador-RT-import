<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2980b9">
  <link rel="icon" href="icon.png">
  <title>Simulador DI Importação - Reforma Tributária</title>
  <script src="https://unpkg.com/imask"></script>
  

<!-- META TAGS PARA COMPARTILHAMENTO SOCIAL -->

<!-- Open Graph para Facebook, LinkedIn etc -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://odangdi.github.io/simulador-RT-import/">
<meta property="og:title" content="Simulador DI Importação - Reforma Tributária">
<meta property="og:description" content="Esta ferramenta realiza a simulação detalhada dos tributos incidentes em operações de importação comercial com DI, considerando tanto a estrutura tributária atual quanto os novos impostos previstos na Reforma Tributária de 2026, como IBS, CBS e IS. Ideal para empresas que desejam antecipar os impactos fiscais e planejar com precisão suas operações.">
<meta property="og:image" content="https://raw.githubusercontent.com/odangdi/simulador-RT-import/main/Tela%20simulador%20importação.jpg">
<meta name="author" content="Diego D'Angelo">

  
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#6366f1',
            secondary: '#000302',
            accent: "white",
            success: '#10b981',
            warning: "white",
            danger: '#ef4444'
          },
          animation: {
            'fade-in': 'fadeIn 0.5s ease-in-out',
            'slide-up': 'slideUp 0.3s ease-out',
            'pulse-soft': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'bounce-soft': 'bounce 1s infinite'
          }
        }
      }
    }
  </script>


<style>
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes slideUp {
    from { transform: translateY(10px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }
  .glass-effect {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }
  .gradient-bg {
    background: linear-gradient(135deg, #000302 40%, #667eea 100%);
  }
  .card-hover {
    transition: all 0.3s ease;
  }
  .card-hover:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  .input-glow:focus {
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
  }
  .number-input {
    background: linear-gradient(145deg, #f8fafc, #e2e8f0);

  }

  input[type="text"], input[type="number"], select {
    background-color: #fff !important;
    color: #000 !important;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 0.75rem;
    padding: 0.1rem 0.1rem;
    width: 100%;
    font-size: 1rem;
    max-width: 100%;
    box-sizing: border-box;
    text-align: left;
  }
  input[readonly], input[readonly]:focus {
    background-color: #1c1f26 !important;
    color: #fff !important;
    border: none;
    text-align: right;
  }
  input[readonly]::placeholder {
    color: #fff !important;
    text-align: right;
  }
  input[id] {
  text-align: right;
  }
  table {
    width: 100%;
  display: block;
    }
    border-collapse: collapse;
    margin-bottom: 1.8rem;
    background: #1c1f26;
    border-radius: 8px;
    overflow: hidden;
    color: white;
  }
  thead tr {@media (max-width: 640px) {
  h1 {
    font-size: 1.25rem;
  }
  input[type="text"], input[type="number"], select {
    font-size: 0.875rem;
  }
    background: #6366f1;
    color: #fff;
    text-align: center;
  }
  td {
    padding: 6px 10px;
    border-bottom: 1px solid #444;
    vertical-align: middle;
    text-align: right;
    color: black;
  }
  th {
    padding: 6px 10px;
    border-bottom: 1px solid #444;
    vertical-align: middle;
    text-align: right;
    color: #fff;
    font-size: 12px;
  }
  th.left, td.left {
    text-align: left;
  }
  tbody tr:last-child td {
    border-bottom: none;
  }
  h1 {
    text-align: center;
    color: white;
    margin-bottom: 1.5rem;
    font-weight: 700;
    font-size: 2rem;
  }
  h2 {
    margin-top: 3rem;
    margin-bottom: 1rem;
    font-size: 1.25rem;
    color: #f5f5f5;
    border-bottom: 2px solid #6366f1;
    padding-bottom: 0.25rem;
  }
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #000302 40%, #667eea 100%);
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  font-size: 10px;
  color: #fff;
  line-height: 1.5;
}
</style>

</head>
<body>


<body class="min-h-screen gradient-bg p-4">
  <div class="max-w-4xl mx-auto">
    <!-- Header -->
    <div class="text-center mb-8 animate-fade-in">
      <div class="inline-flex items-center justify-center w-16 h-16 bg-white/20 rounded-full mb-4 backdrop-blur-sm">
        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
        </svg>
      </div>
      <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">
        SIMULADOR DI IMPORTAÇÃO
      </h1>
      <p class="text-white/80 text-lg">Cálculo de Impostos - Reforma Tributária</p>
    </div>


<!-- Info Card -->
    <div class="glass-effect rounded-2xl p-6 mb-8 animate-slide-up">
      <div class="flex items-start space-x-4">
        <div class="flex-shrink-0">
          <div class="w-10 h-10 bg-accent/20 rounded-full flex items-center justify-center">
            <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
        </div>
        <div>
          <h3 class="text-white font-semibold mb-1">Sobre esta ferramenta</h3>
          <p class="text-white/80 text-0.65 leading-relaxed">
            Esta ferramenta realiza a simulação detalhada dos tributos incidentes em operações de IMPORTAÇÃO COMERCIAL COM DI, considerando tanto a estrutura tributária atual quanto os novos impostos previstos na Reforma Tributária de 2026, como IBS, CBS e IS. Ideal para empresas que desejam antecipar os impactos fiscais e planejar com precisão suas operações.
          </p>
        </div>
      </div>
    </div>


<p style="font-size: 11px;">
<strong>- A exemplo de Declaração de Importação (DI), preencha os dados e os percentuais dos impostos:</strong></p><br>


<footer class="glass-effect rounded-2xl p-6 mt-8 text-left animate-fade-in text-white text-sm space-y-4">


     <!-- Seção Moeda e Câmbio -->
    <section aria-labelledby="sec-cambio">
      <h2 class="text-xl font-bold text-white">CONVERSÃO</h2>
      
      <fieldset>
        <legend class="sr-only" data-i18n="currency_and_rate">Selecione</legend>

        <div class="form-group">
          <label for="moeda" data-i18n="select_currency">Moeda</label>
          <select id="moeda" name="moeda">
            <option value="">Selecione</option>
            <option value="USD-BRL">Dólar (USD)</option>
            <option value="EUR-BRL">Euro (EUR)</option>
            <option value="GBP-BRL">Libra Esterlina (GBP)</option>
            <option value="ARS-BRL">Peso Argentino (ARS)</option>
            <option value="JPY-BRL">Iene Japonês (JPY)</option>
            <option value="AUD-BRL">Dólar Australiano (AUD)</option>
            <option value="CAD-BRL">Dólar Canadense (CAD)</option>
            <option value="CHF-BRL">Franco Suíço (CHF)</option>
            <option value="CNY-BRL">Yuan Chinês (CNY)</option>
            <option value="NZD-BRL">Dólar Neozelandês (NZD)</option>
            <option value="MXN-BRL">Peso Mexicano (MXN)</option>
            <option value="KRW-BRL">Won Sul-Coreano (KRW)</option>
            <option value="INR-BRL">Rupia Indiana (INR)</option>
            <option value="ZAR-BRL">Rand Sul-Africano (ZAR)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="cambio" data-i18n="exchange_rate">Taxa de câmbio (informe)</label>
          <div class="input-with-icon">
            <input type="text" id="cambio" name="cambio" inputmode="decimal" required aria-describedby="cambio-error"
            />
            <div id="cambio-loading" class="loading-spinner" aria-hidden="true"></div>
          </div>
          <div id="cambio-error" class="error-message" role="alert"></div>
        </div>

      </fieldset>
    </section>
<br>

<h2 class="text-xl font-bold text-white">COMPOSIÇÃO</h2>
  <table>
    <thead>
      <tr>
        <th class="left">Item</th>
        <th>Dados do produto</th>
        <th>Total</th>
        <th>Vl R$</th>
        <th>Total R$</th>
      </tr>
    </thead>
    <tbody>
<tr>
  <th class="left">Quantidade</td>
  <td data-label="Quantidade" >
  <input id="quantidade" class="taxa" value="10,000" min="0,001" step="any" aria-label="Quantidade" />
  </td>

<!-- Faça o mesmo para cada <td> que representa um campo de dados visível em telas menores -->
<tr>
  <th class="left">Vl Unit. FOB ($)</th>
  <td data-label="Vl Produto FOB ($)"><input id="fob" class="taxa" value="27,758" aria-label="Valor FOB em moeda estrangeira" /></td>
  <th data-label="Total" id="totalFOB"></th>
  <th data-label="Vl R$" id="vlFOB"></th>
  <th data-label="Total R$" id="totalFOBR"></th>
</tr>

<tr>
  <th class="left">Frete internacional ($)</td>

  <td data-label="Frete internacional ($)"><input id="frete" class="taxa" value="1,02" aria-label="Frete internacional" /></td>
  <th data-label="Total"></th>
  <th data-label="Vl R$" id="vlFrete"></th>
  <th data-label="Total R$" id="totalFreteR"></th>
</tr>
<tr>
  <th class="left">Seguro internacional ($)</th>
  <td data-label="Seguro internacional ($)"><input id="seguro" class="taxa" value="0,00" aria-label="Seguro internacional" /></td>
  <th data-label="Total"></th>
  <th data-label="Vl R$" id="vlSeguro"></th>
  <th data-label="Total R$" id="totalSeguroR"></th>
</tr>
      <tr class="bold">
        <th class="left">TOTAL ADUANEIRO (R$)</th>
        <th colspan="4" id="va"></th>

      </tr>
<tr>
  <th class="left">Acrescimos (capatazia) (R$)</td>
  <td colspan="4" data-label="Acrescimos (capatazia) (R$)">
    <input id="capatazia" class="taxa" value="8,82" aria-label="Acrescimos capatazia" />
  </td>
</tr>
      <tr class="bold">
        <th class="left">TOTAL ADUANEIRO CIF (R$)</th>
        <th colspan="4" id="cif"></th>
      </tr>
    </tbody>
  </table>


<h2 class="text-xl font-bold text-white">ENCARGOS ADUANEIROS (R$)</h2>
  <table>
    <thead>
      <tr>
        <th class="left">Impostos e Despesas</th>
        <th>Base</th>
        <th>Taxa (%)</th>
        <th>Total R$</th>
      </tr>
    </thead>
    <tbody>
<tr>
  <th class="left">Imposto de Importação (II)</th>
  <th data-label="Base" id="baseII"></th>
  <td data-label="Taxa (%)"><input id="taxaII" class="taxa" value="14,40" aria-label="Taxa Imposto de Importação" /></td>
  <th data-label="Total R$" id="totalII"></th>
</tr>
<tr>
  <th class="left">IPI</td>
  <th data-label="Base" id="baseIPI"></th>
  <td data-label="Taxa (%)"><input id="taxaIPI" class="taxa" value="0,00" aria-label="Taxa IPI" /></td>
  <th data-label="Total R$" id="totalIPI"></th>
</tr>
<tr>
  <th class="left">PIS</td>
  <th data-label="Base" id="basePIS"></th>
  <td data-label="Taxa (%)"><input id="taxaPIS" class="taxa" value="0,00" aria-label="Taxa PIS" /></td>
  <th data-label="Total R$" id="totalPIS"></th>
</tr>
<tr>
  <th class="left">COFINS</td>
  <th data-label="Base" id="baseCOFINS"></th>
  <td data-label="Taxa (%)"><input id="taxaCOFINS" class="taxa" value="0,00" aria-label="Taxa COFINS" /></td>
  <th data-label="Total R$" id="totalCOFINS"></th>
</tr>
<tr>
  <th class="left">IS-Imposto Seletivo (ad valorem)</td>
  <th data-label="Base" id="baseIS1"></th>
  <td data-label="Taxa (%)"><input id="taxaIS1" class="taxa" value="0,00" readonly aria-label="Taxa Imposto Seletivo 1" /></td>
  <th data-label="Total R$" id="totalIS1"></th>
</tr>

<tr>
  <th class="left">Taxa Siscomex</th>
  <td colspan="2"></td>
  <td data-label="Total R$"><input id="totalSiscomex" class="taxa" value="0,00" oninput="calcularTotal()" aria-label="Total Taxa Siscomex" /></td>
</tr>
<tr>
  <th class="left">AFRMM</td>
  <td colspan="2"></td>
  <td data-label="Total R$"><input id="totalAFRMM" class="taxa" value="0,00" oninput="calcularTotal()" aria-label="Total AFRMM" /></td>
</tr>
<tr>
  <th class="left">CIDE-Combustíveis</th>
  <td colspan="2"></td>
  <td data-label="Total R$"><input id="totalCIDE" class="taxa" value="0,00" oninput="calcularTotal()" aria-label="Total CIDE-Combustíveis" /></td>
</tr>
<tr>
  <th class="left">Antidumping</th>
  <td colspan="2"></td>
  <td data-label="Total R$"><input id="totalAntidumping" class="taxa" value="0,00" oninput="calcularTotal()" aria-label="Total Antidumping" /></td>
</tr>
<tr>
  <th class="left">Compensatórios</th>
  <td colspan="2"></td>
  <td data-label="Total R$"><input id="totalCompensatorios" class="taxa" value="0,00" oninput="calcularTotal()" aria-label="Total Compensatórios" /></td>
</tr>
<tr>
  <th class="left">Salvaguardas</th>
  <td colspan="2"></td>
  <td data-label="Total R$"><input id="totalSalvaguardas" class="taxa" value="0,00" oninput="calcularTotal()" aria-label="Total Salvaguardas" /></td>
</tr>
<tr>
  <th class="left">Outros tributos</th>
  <td colspan="2"></td>
  <td data-label="Total R$"><input id="totalOutros" class="taxa" value="0,00" oninput="calcularTotal()" aria-label="Total Outros Tributos" /></td>
</tr>	

      <tr class="bold">
        <th class="left">TOTAL ADUANEIRO EM REAIS R$ = VL Aduaneiro CIF + ENCARGOS - IS </th>
        <th colspan="3" id="totalEncargos"></th>
      </tr>
     
    </tbody>

  </table>

<h2 class="text-xl font-bold text-white">BASE DE CÁLCULO DO ICMS</h2>
  <table>
    <thead>
      <tr>
        <th class="left">Impostos</th>
        <th>Base</th>
        <th>Taxa (%)</th>
        <th>Fator</th>
        <th>Total ICMS</th>
      </tr>
    </thead>
    <tbody>
     <tr>
  <th class="left">ICMS</td>
  <th data-label="Base" id="baseICMS"></th>
  <td data-label="Taxa (%)"><input id="taxaICMS" class="taxa" value="18,00" aria-label="Taxa ICMS" /></td>
  <th data-label="Fator" id="fatorICMS"></th>
  <th data-label="Total ICMS" id="totalICMS"></th>
</tr>
    </tbody>
  </table>

<h2 class="text-xl font-bold text-white">BASE DE CÁLCULO DO IBS/CBS/IS</h2>
  <table>
    <thead>
      <tr>
        <th class="left">Imposto Reforma Tributária</th>
        <th>Base</th>
        <th>Taxa (%)</th>
        <th>Total R$</th>
      </tr>
    </thead>
    <tbody>
   <tr>
  <th class="left">IBS Municial (Base art. 65 LC 214/25)</td>
  <th data-label="Base" id="baseIBSM"></th>
  <td data-label="Taxa (%)"><input id="taxaIBSM" class="taxa" value="0,00" aria-label="Taxa IBS Municipal" /></td>
  <th data-label="Total R$" id="totalIBSM"></th>
</tr>
<tr>
  <th class="left">IBS Estadual (Base art. 65 LC 214/25)</td>
  <th data-label="Base" id="baseIBSE"></th>
  <td data-label="Taxa (%)"><input id="taxaIBSE" class="taxa" value="0,10" aria-label="Taxa IBS Estadual" /></td>
  <th data-label="Total R$" id="totalIBSE"></th>
</tr>
<tr>
  <th class="left">CBS (Base art. 65 LC 214/25)</td>
  <th data-label="Base" id="baseCBS"></th>
  <td data-label="Taxa (%)"><input id="taxaCBS" class="taxa" value="0,90" aria-label="Taxa CBS" /></td>
  <th data-label="Total R$" id="totalCBS"></th>
</tr>
<tr>
  <th class="left">IS-Imposto Seletivo (Base art. 434 LC 214/25)</td>
  <th data-label="Base" id="baseIS2"></th>
  <td data-label="Taxa (%)"><input id="taxaIS2" class="taxa" value="0,00" aria-label="Taxa Imposto Seletivo 2" /></td>
  <th data-label="Total R$" id="totalIS2"></th>
</tr>

      <tr class="bold">
        <th class="left">TOTAL DOS IMPOSTOS RT</th>
        <th colspan="3" id="totalRT"></th>
      </tr>
     
    </tbody>
  </table>



<h2 class="text-xl font-bold text-white">TOTAL</h2>

  <table>
    <thead>

<tr>
      <th class="left">DEMONSTRATIVO DE VALORES</th>
        <th></th>
        <th></th>
        <th></th>
  </thead>
        <tr class="bold">
        <th class="left">VALOR TOTAL DO PRODUTO</th>
        <th colspan="3" id="totalprodutos"></th>
      </tr>

        <tr class="bold">
        <th class="left">VALOR TOTAL DA NOTA FISCAL</th>
        <th colspan="3" id="totalNF"></th>
      </tr>  


    </tbody>

  </table>



  <script>
    // Função para arredondar com 2 casas decimais
    const arred = val => +(val.toFixed(2));

    function calcular() {
      const qtd = parseFloat(document.getElementById('quantidade').value.replace(',', '.')) || 0;
      const cambio = parseFloat(document.getElementById('cambio').value.replace(',', '.')) || 0;
      const fob = parseFloat(document.getElementById('fob').value.replace(',', '.')) || 0;
      const frete = parseFloat(document.getElementById('frete').value.replace(',', '.')) || 0;
      const seguro = parseFloat(document.getElementById('seguro').value.replace(',', '.')) || 0;
      const capatazia = parseFloat(document.getElementById('capatazia').value.replace(',', '.')) || 0;

      const totalFOB = arred(fob * qtd);
      const totalFOBR = arred(totalFOB * cambio);
      const freteR = arred(frete * cambio);
      const seguroR = arred(seguro * cambio);
      const va = arred(totalFOBR + freteR + seguroR);
      const cif = arred(va + capatazia);

      const taxaII = (parseFloat(document.getElementById('taxaII').value.replace(',', '.')) || 0) / 100;
      const taxaIPI = (parseFloat(document.getElementById('taxaIPI').value.replace(',', '.')) || 0) / 100;
      const taxaPIS = (parseFloat(document.getElementById('taxaPIS').value.replace(',', '.')) || 0) / 100;
      const taxaCOFINS = (parseFloat(document.getElementById('taxaCOFINS').value.replace(',', '.')) || 0) / 100;
      const taxaIS2 = (parseFloat(document.getElementById('taxaIS2').value.replace(',', '.')) || 0) / 100;

const siscomex = parseFloat(document.getElementById('totalSiscomex')?.value.replace(',', '.') || 0);
const afrmm = parseFloat(document.getElementById('totalAFRMM')?.value.replace(',', '.') || 0);
const cide = parseFloat(document.getElementById('totalCIDE')?.value.replace(',', '.') || 0);
const antidumping = parseFloat(document.getElementById('totalAntidumping')?.value.replace(',', '.') || 0);
const compensatorios = parseFloat(document.getElementById('totalCompensatorios')?.value.replace(',', '.') || 0);
const salvaguardas = parseFloat(document.getElementById('totalSalvaguardas')?.value.replace(',', '.') || 0);
const outros = parseFloat(document.getElementById('totalOutros')?.value.replace(',', '.') || 0);


  


      // Sincroniza taxaIS1 com taxaIS2
      document.getElementById('taxaIS1').value = (taxaIS2 * 100).toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      const taxaIS1 = taxaIS2;

      const taxaICMS = (parseFloat(document.getElementById('taxaICMS').value.replace(',', '.')) || 0) / 100;
      const taxaIBSM = (parseFloat(document.getElementById('taxaIBSM').value.replace(',', '.')) || 0) / 100;
      const taxaIBSE = (parseFloat(document.getElementById('taxaIBSE').value.replace(',', '.')) || 0) / 100;
      const taxaCBS = (parseFloat(document.getElementById('taxaCBS').value.replace(',', '.')) || 0) / 100;

      const totalII = arred(cif * taxaII);
      const totalIPI = arred((cif + totalII) * taxaIPI);
      const totalPIS = arred(cif * taxaPIS);
      const totalCOFINS = arred(cif * taxaCOFINS);
      const totalIS1 = arred((cif + totalII) * taxaIS1);

      const totalEncargos = arred(cif + totalII + totalIPI + totalPIS + totalCOFINS + totalIS1 - totalIS1 + siscomex + afrmm + cide + antidumping + compensatorios + salvaguardas + outros);
      const totalprodutos = arred(totalEncargos - totalIS1 + totalIS1);

      const fatorICMS = +(1 - taxaICMS).toFixed(4);
      const baseICMS = fatorICMS !== 0 ? arred(totalprodutos / fatorICMS) : 0;
      const totalICMS = arred(baseICMS * taxaICMS);

      const totalIBSM = arred((totalEncargos - totalIPI - totalPIS - totalCOFINS + totalIS1) * taxaIBSM);
      const totalIBSE = arred((totalEncargos - totalIPI - totalPIS - totalCOFINS + totalIS1) * taxaIBSE);
      const totalCBS = arred((totalEncargos - totalIPI - totalPIS - totalCOFINS + totalIS1) * taxaCBS);
      const totalIS2 = arred((cif + totalII) * taxaIS2);

      const totalNF = arred(cif + totalII + totalIPI + totalPIS + totalCOFINS + totalICMS + totalIBSM + totalIBSE + totalCBS + totalIS1);

      // Atualiza DOM
      document.getElementById('totalFOB').textContent = totalFOB.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('vlFOB').textContent = arred(fob * cambio).toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('totalFOBR').textContent = totalFOBR.toLocaleString('pt-BR', { minimumFractionDigits: 2 });

      document.getElementById('vlFrete').textContent = freteR.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('totalFreteR').textContent = freteR.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('vlSeguro').textContent = seguroR.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('totalSeguroR').textContent = seguroR.toLocaleString('pt-BR', { minimumFractionDigits: 2 });

      document.getElementById('va').textContent = va.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('cif').textContent = cif.toLocaleString('pt-BR', { minimumFractionDigits: 2 });

      document.getElementById('baseII').textContent = cif.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('baseIPI').textContent = (cif + totalII).toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('basePIS').textContent = cif.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('baseCOFINS').textContent = cif.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('baseIS1').textContent = (cif + totalII).toLocaleString('pt-BR', { minimumFractionDigits: 2 });

      document.getElementById('totalII').textContent = totalII.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('totalIPI').textContent = totalIPI.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('totalPIS').textContent = totalPIS.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('totalCOFINS').textContent = totalCOFINS.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('totalIS1').textContent = totalIS1.toLocaleString('pt-BR', { minimumFractionDigits: 2 });

      document.getElementById('totalEncargos').textContent = totalEncargos.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('totalprodutos').textContent = totalprodutos.toLocaleString('pt-BR', { minimumFractionDigits: 2 });

      document.getElementById('baseICMS').textContent = baseICMS.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('fatorICMS').textContent = fatorICMS.toFixed(4);
      document.getElementById('totalICMS').textContent = totalICMS.toLocaleString('pt-BR', { minimumFractionDigits: 2 });

      document.getElementById('baseIBSM').textContent = (totalEncargos - totalIPI - totalPIS - totalCOFINS + totalIS1).toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('baseIBSE').textContent = (totalEncargos - totalIPI - totalPIS - totalCOFINS + totalIS1).toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('baseCBS').textContent = (totalEncargos - totalIPI - totalPIS - totalCOFINS + totalIS1).toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('baseIS2').textContent = (cif + totalII).toLocaleString('pt-BR', { minimumFractionDigits: 2 });

      document.getElementById('totalIBSM').textContent = totalIBSM.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('totalIBSE').textContent = totalIBSE.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('totalCBS').textContent = totalCBS.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      document.getElementById('totalIS2').textContent = totalIS2.toLocaleString('pt-BR', { minimumFractionDigits: 2 });

      document.getElementById('totalRT').textContent = (totalIBSM + totalIBSE + totalCBS + totalIS1).toLocaleString('pt-BR', { minimumFractionDigits: 2 });

      document.getElementById('totalNF').textContent = totalNF.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
    }

window.addEventListener('load', () => {
  const campoCambio = document.getElementById('cambio');
  const selectMoeda = document.getElementById('moeda');
  const erroDiv = document.getElementById('cambio-error');
  const loadingIcon = document.getElementById('cambio-loading');
  let cambioManual = false;

  IMask(campoCambio, {
    mask: Number,
    scale: 4,
    thousandsSeparator: '.',
    radix: ',',
    padFractionalZeros: true,
    normalizeZeros: true,
    min: 0,
  });

  async function atualizarCambioAwesomeAPI() {
    if (cambioManual || !selectMoeda.value) return;

    const moeda = selectMoeda.value;
    const parMoeda = moeda.replace('-', '');
    const url = `https://economia.awesomeapi.com.br/json/last/${moeda}`;

    erroDiv.textContent = '🔄 Buscando taxa de câmbio...';
    erroDiv.style.color = '#555';
    loadingIcon.style.display = 'inline-block';

    try {
      const resposta = await fetch(url);
      if (!resposta.ok) throw new Error('Erro ao consultar a API de câmbio');

      const dados = await resposta.json();

      if (!dados[parMoeda] || !dados[parMoeda].bid) {
        throw new Error('Cotação não disponível para esta moeda');
      }

      const bid = parseFloat(dados[parMoeda].bid).toFixed(4);
      campoCambio.value = bid.replace('.', ',');
      campoCambio.disabled = false;
      erroDiv.textContent = '';
      calcular();
    } catch (erro) {
      campoCambio.disabled = false;
      erroDiv.textContent = '⚠️ ' + erro.message + '. Por favor, digite a taxa manualmente.';
      erroDiv.style.color = '#d00';
    } finally {
      loadingIcon.style.display = 'none';
    }
  }

  selectMoeda.addEventListener('change', () => {
    cambioManual = false;
    campoCambio.value = '';
    erroDiv.textContent = '';
    atualizarCambioAwesomeAPI();
  });

  campoCambio.addEventListener('input', () => {
    cambioManual = true;
    campoCambio.disabled = false;
    erroDiv.textContent = '';
    calcular();
  });

  // ❌ NÃO BUSCA AUTOMATICAMENTE AO CARREGAR
  // atualizarCambioAwesomeAPI();
});


</script>







<!-- Footer -->


    <footer style="background: rgba(0,0,0,0.2); color: white; padding: 30px 20px; margin-top: 40px; text-align: center; border-top: 1px solid rgba(255,255,255,0.1);">
        <div style="max-width: 1200px; margin: 0 auto; display: grid; gap: 20px;">

  <!-- Título e descrição -->
  <div class="flex items-center justify-center space-x-2">
    <svg class="w-5 h-5 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <span class="text-white/80">Simulador DI Importação - Reforma Tributária</span>
  </div>



  <!-- Feedback -->
  <div>
    <a href="https://forms.gle/FgHaFehB74mNmxH98" target="_blank" class="text-teal-300 hover:underline">
      ✅ Dê seu feedback sobre este conteúdo
    </a>
  </div>


  <!-- eBooks Amazon -->
  <div>
    <h3 class="font-semibold">📚 eBooks de Estudos Fiscais na Amazon:</h3>
    <a href="https://www.amazon.com.br/dp/B0FB4BDH8V" target="_blank" class="block text-blue-300 hover:underline">
      ■ CRÉDITOS DE IBS e CBS: uso e consumo pessoal
    </a>
    <a href="https://www.amazon.com.br/dp/B0DHGB27K2" target="_blank" class="block text-blue-300 hover:underline">
      ■ EXCLUSÃO ICMS DA BASE PIS E COFINS: formação do preço de venda
    </a>
  </div>

  <!-- Informações legais -->
  <div class="text-white/60 text-xs">
    Simulador desenvolvido para auxiliar no cálculo de impostos da Reforma Tributária com base na Lei Complementar nº 214, de 16/01/2025 e legislação anterior.<br>
    &copy; 2025 Diego D'Angelo. Licenciado sob
    <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" class="text-white/70 underline">
      CC BY 4.0
    </a>
  </div>

  <!-- LinkedIn -->
  <div>
    Me siga no LinkedIn –
    <a href="https://www.linkedin.com/in/diegodangelo-di-ryco/" target="_blank" class="text-sky-400 hover:underline">
      Diego D'Angelo
    </a>
    <a href="https://www.linkedin.com/in/diegodangelo-di-ryco/" target="_blank" class="inline-block ml-1">
      <img src="https://cdn-icons-png.flaticon.com/512/174/174857.png" alt="LinkedIn" width="20" height="20" class="inline-block align-middle">
    </a>
  </div>

  <!-- Botão de Compartilhar -->
  <button onclick="compartilhar()" class="bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-md transition">
    🔗 Compartilhar esta página
  </button>

</footer>

<script>
function compartilhar() {
  if (navigator.share) {
    navigator.share({
      title: 'Simulador DI Importação',
      text: 'Confira este simulador de importação baseado na Reforma Tributária!',
      url: 'https://odangdi.github.io/simulador-RT-import/',
    })
    .then(() => console.log('Compartilhado com sucesso'))
    .catch((error) => console.log('Erro ao compartilhar:', error));
  } else {
    alert('Compartilhamento não suportado neste navegador. Copie o link manualmente:\n\nhttps://odangdi.github.io/simulador-RT-import/');
  }
}

</script>


<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('service-worker.js')
        .then(reg => console.log('Service Worker registrado com sucesso:', reg.scope))
        .catch(err => console.log('Falha ao registrar Service Worker:', err));
    });
  }
</script>




</body>
</html>
