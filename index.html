<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#6366f1">
  <link rel="icon" href="icon.png">
  <title>Simulador RT 2026 - Cálculo de Impostos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#6366f1',
            secondary: '#000302',
            accent: "white",
            success: '#10b981',
            warning: "white",
            danger: '#ef4444'
          },
          animation: {
            'fade-in': 'fadeIn 0.5s ease-in-out',
            'slide-up': 'slideUp 0.3s ease-out',
            'pulse-soft': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'bounce-soft': 'bounce 1s infinite'
          }
        }
      }
    }
  </script>
  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideUp {
      from { transform: translateY(10px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .glass-effect {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .gradient-bg {
      background: linear-gradient(135deg, #000302 40%, #667eea 100%);
    }
    .card-hover {
      transition: all 0.3s ease;
    }
    .card-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    .input-glow:focus {
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }
    .number-input {
      background: linear-gradient(145deg, #f8fafc, #e2e8f0);
    }
  </style>
</head>
<body class="min-h-screen gradient-bg p-4">
  <div class="max-w-4xl mx-auto">
    <!-- Header -->
    <div class="text-center mb-8 animate-fade-in">
      <div class="inline-flex items-center justify-center w-16 h-16 bg-white/20 rounded-full mb-4 backdrop-blur-sm">
        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
        </svg>
      </div>
      <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">
        Simulador RT 2026
      </h1>
      <p class="text-white/80 text-lg">Cálculo de Impostos - Reforma Tributária</p>
    </div>

    <!-- Info Card -->
    <div class="glass-effect rounded-2xl p-6 mb-8 animate-slide-up">
      <div class="flex items-start space-x-4">
        <div class="flex-shrink-0">
          <div class="w-10 h-10 bg-accent/20 rounded-full flex items-center justify-center">
            <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
        </div>
        <div>
          <h3 class="text-white font-semibold mb-2">Sobre esta ferramenta</h3>
          <p class="text-white/80 text-sm leading-relaxed">
            Esta ferramenta simula o cálculo de impostos em uma empresa Lucro Real, em um cenário de venda para 
            <em class="text-accent font-medium">Industrialização</em> com base nos tributos aplicáveis a partir da Reforma Tributária. Atenção ao informar os percentuais de impostos.
          </p>
        </div>
      </div>
    </div>

    <!-- Main Content Grid -->
    <div class="grid lg:grid-cols-2 gap-8">
      <!-- Input Form -->
      <div class="glass-effect rounded-2xl p-6 card-hover animate-slide-up">
        <div class="flex items-center space-x-3 mb-6">
          <div class="w-8 h-8 bg-primary/20 rounded-lg flex items-center justify-center">
            <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
            </svg>
          </div>
          <h2 class="text-xl font-bold text-white">Dados para Cálculo</h2>
        </div>

        <div class="space-y-4">
          <!-- Valor Líquido -->
          <div class="space-y-2">
            <label class="block text-white font-medium text-sm">
              Valor Líquido do Produto (custo + lucro)
              <span class="text-white/60 text-xs block mt-1">
                (não foi considerado Desp. Acess., Frete, Seguro, Descontos)
              </span>
            </label>
            <div class="relative">
              <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm">R$</span>
              <input type="text" inputmode="decimal" id="valorLiquido"
       class="w-full pl-10 pr-4 py-3 number-input border border-white/20 rounded-xl text-gray-700 placeholder-gray-400 focus:outline-none input-glow transition-all duration-200"
       placeholder="0,00">
            </div>
          </div>

          <!-- Tax Inputs Grid -->
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="space-y-2">
              <label class="block text-white font-medium text-sm">ICMS (%)</label>
              <input type="number" id="icms" value="18" step="0.01" 
                     class="w-full px-4 py-3 number-input border border-white/20 rounded-xl text-gray-700 focus:outline-none input-glow transition-all duration-200">
            </div>
            
            <div class="space-y-2">
              <label class="block text-white font-medium text-sm">IPI (%)</label>
              <input type="number" id="ipi" value="9.75" step="0.01" 
                     class="w-full px-4 py-3 number-input border border-white/20 rounded-xl text-gray-700 focus:outline-none input-glow transition-all duration-200">
            </div>
            
            <div class="space-y-2">
              <label class="block text-white font-medium text-sm">PIS (%)</label>
              <input type="number" id="pis" value="1.65" step="0.01" 
                     class="w-full px-4 py-3 number-input border border-white/20 rounded-xl text-gray-700 focus:outline-none input-glow transition-all duration-200">
            </div>
            
            <div class="space-y-2">
              <label class="block text-white font-medium text-sm">COFINS (%)</label>
              <input type="number" id="cofins" value="7.6" step="0.01" 
                     class="w-full px-4 py-3 number-input border border-white/20 rounded-xl text-gray-700 focus:outline-none input-glow transition-all duration-200">
            </div>
            
            <div class="space-y-2">
              <label class="block text-white font-medium text-sm">IBS Estadual (%)</label>
              <input type="number" id="ibse" value="0.10" step="0.01" 
                     class="w-full px-4 py-3 number-input border border-white/20 rounded-xl text-gray-700 focus:outline-none input-glow transition-all duration-200">
            </div>
            
            <div class="space-y-2">
              <label class="block text-white font-medium text-sm">IBS Municipal (%)</label>
              <input type="number" id="ibsm" value="0.00" step="0.01" 
                     class="w-full px-4 py-3 number-input border border-white/20 rounded-xl text-gray-700 focus:outline-none input-glow transition-all duration-200">
            </div>
            
            <div class="space-y-2">
              <label class="block text-white font-medium text-sm">CBS (%)</label>
              <input type="number" id="cbs" value="0.90" step="0.01" 
                     class="w-full px-4 py-3 number-input border border-white/20 rounded-xl text-gray-700 focus:outline-none input-glow transition-all duration-200">
            </div>
            
            <div class="space-y-2">
              <label class="block text-white font-medium text-sm">IS (%)</label>
              <input type="number" id="is" value="0.00" step="0.01" 
                     class="w-full px-4 py-3 number-input border border-white/20 rounded-xl text-gray-700 focus:outline-none input-glow transition-all duration-200">
            </div>
          </div>

          <!-- Calculate Button -->
          <button onclick="calcular()" 
                  class="w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-[1.02] hover:shadow-lg flex items-center justify-center space-x-2 mt-6">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 002 2z"></path>
            </svg>
            <span>Calcular Impostos</span>
          </button>
        </div>
      </div>

      <!-- Results -->
      <div class="glass-effect rounded-2xl p-6 card-hover animate-slide-up">
        <div class="flex items-center space-x-3 mb-6">
          <div class="w-8 h-8 bg-success/20 rounded-lg flex items-center justify-center">
            <svg class="w-4 h-4 text-success" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
            </svg>
          </div>
          <h2 class="text-xl font-bold text-white">Resultado do Cálculo</h2>
        </div>

        <div id="resultado" class="space-y-4">
          <div class="bg-white/10 rounded-xl p-4 text-center">
            <p class="text-white/80 text-sm mb-2">Clique em "Calcular Impostos" para ver os resultados</p>
            <div class="w-12 h-12 mx-auto bg-white/20 rounded-full flex items-center justify-center animate-pulse-soft">
              <svg class="w-6 h-6 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>


<!-- Footer -->
<footer class="glass-effect rounded-2xl p-6 mt-8 text-center animate-fade-in text-white text-sm space-y-4">

  <!-- Título e descrição -->
  <div class="flex items-center justify-center space-x-2">
    <svg class="w-5 h-5 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <span class="text-white/80">Simulador RT 2026</span>
  </div>

  <!-- Feedback -->
  <div>
    <a href="https://forms.gle/FgHaFehB74mNmxH98" target="_blank" class="text-teal-300 hover:underline">
      ✅ Dê seu feedback sobre este conteúdo
    </a>
  </div>

  <!-- eBooks Amazon -->
  <div>
    <h3 class="font-semibold">📚 eBooks de Estudos Fiscais na Amazon:</h3>
    <a href="https://www.amazon.com.br/dp/B0FB4BDH8V" target="_blank" class="block text-blue-300 hover:underline">
      ■ CRÉDITOS DE IBS e CBS: uso e consumo pessoal
    </a>
    <a href="https://www.amazon.com.br/dp/B0DHGB27K2" target="_blank" class="block text-blue-300 hover:underline">
      ■ EXCLUSÃO ICMS DA BASE PIS E COFINS: formação do preço de venda
    </a>
  </div>

  <!-- Informações legais -->
  <div class="text-white/60 text-xs">
    Simulador desenvolvido para auxiliar no cálculo de impostos da Reforma Tributária com base na Lei Complementar nº 214, de 16/01/2025 e legislação anterior.<br>
    &copy; 2025 Diego D'Angelo. Licenciado sob
    <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" class="text-white/70 underline">
      CC BY 4.0
    </a>
  </div>

  <!-- LinkedIn -->
  <div>
    Me siga no LinkedIn –
    <a href="https://www.linkedin.com/in/diegodangelo-di-ryco/" target="_blank" class="text-sky-400 hover:underline">
      Diego D'Angelo
    </a>
    <a href="https://www.linkedin.com/in/diegodangelo-di-ryco/" target="_blank" class="inline-block ml-1">
      <img src="https://cdn-icons-png.flaticon.com/512/174/174857.png" alt="LinkedIn" width="20" height="20" class="inline-block align-middle">
    </a>
  </div>

  <!-- Botão de Compartilhar -->
  <button onclick="compartilhar()" class="bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-md transition">
    🔗 Compartilhar esta página
  </button>

</footer>

<script>
function compartilhar() {
  if (navigator.share) {
    navigator.share({
      title: 'Simulador RT 2026',
      text: 'Confira este simulador de impostos baseado na Reforma Tributária!',
      url: 'https://odangdi.github.io/simulador-rt2026/',
    })
    .then(() => console.log('Compartilhado com sucesso'))
    .catch((error) => console.log('Erro ao compartilhar:', error));
  } else {
    alert('Compartilhamento não suportado neste navegador. Copie o link manualmente:\n\nhttps://odangdi.github.io/simulador-rt2026/');
  }
}

</script>




  </div>

  <script>
    function formatarMoeda(valor) {
      return new Intl.NumberFormat('pt-BR', {
        style: 'currency',
        currency: 'BRL'
      }).format(valor);
    }

    function formatarPercentual(valor) {
      return new Intl.NumberFormat('pt-BR', {
        style: 'percent',
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }).format(valor / 100);
    }

function calcular() {
const valorLiquido = parseFloat(document.getElementById('valorLiquido').value.replace(/\./g, '').replace(',', '.')) || 0;

  const icms = (parseFloat(document.getElementById('icms').value) || 0) / 100;
  const ipi = (parseFloat(document.getElementById('ipi').value) || 0) / 100;
  const pis = (parseFloat(document.getElementById('pis').value) || 0) / 100;
  const cofins = (parseFloat(document.getElementById('cofins').value) || 0) / 100;
  const ibse = (parseFloat(document.getElementById('ibse').value) || 0) / 100;
  const ibsm = (parseFloat(document.getElementById('ibsm').value) || 0) / 100;
  const cbs = (parseFloat(document.getElementById('cbs').value) || 0) / 100;
  const is = (parseFloat(document.getElementById('is').value) || 0) / 100;

  // Calcula fator considerando o efeito do ICMS sobre PIS e COFINS (não cumulativo)
  const fator = 1 - (icms + (pis * (1 - icms)) + (cofins * (1 - icms)));

  // Valor bruto antes dos impostos embutidos
  const valorBruto = valorLiquido / fator;

  // Cálculos dos impostos conforme bases:
  const valorICMS = valorBruto * icms;
  const valorSemICMS = valorBruto - valorICMS;
  const valorPIS = valorSemICMS * pis;
  const valorCOFINS = valorSemICMS * cofins;
  const valorIPI = valorBruto * ipi;
  
  // Valor total da nota: valor bruto + IPI
  const totalNota = valorBruto + valorIPI;

  // IS: base é valor líquido
  const baseIS = valorLiquido;
  const valorIS = baseIS * is;

  // IBS e CBS: base é valor líquido + IS
  const baseIBSCBS = baseIS + valorIS;
  const valorIBSe = baseIBSCBS * ibse;
  const valorIBSm = baseIBSCBS * ibsm;
  const valorCBS = baseIBSCBS * cbs;

  // Carga tributária tradicional (ICMS + IPI + PIS + COFINS)
  const cargaTributaria = valorICMS + valorIPI + valorPIS + valorCOFINS;

  // Carga tributária LC 2014/2025 (IBS + CBS + IS)
  const cargaTributariaLC = valorIBSe + valorIBSm + valorCBS + valorIS;

  // Soma total dos impostos para detalhes
  const totalImpostos = valorICMS + valorPIS + valorCOFINS + valorIPI + valorIS + valorIBSe + valorIBSm + valorCBS;

  // Preparar array para detalhamento
  const impostos = [
    { nome: 'ICMS', percentual: icms * 100, valor: valorICMS, cor: 'bg-red-500' },
    { nome: 'IPI', percentual: ipi * 100, valor: valorIPI, cor: 'bg-blue-500' },
    { nome: 'PIS', percentual: pis * 100, valor: valorPIS, cor: 'bg-green-500' },
    { nome: 'COFINS', percentual: cofins * 100, valor: valorCOFINS, cor: 'bg-yellow-500' },
    { nome: 'IBS Estadual', percentual: ibse * 100, valor: valorIBSe, cor: 'bg-purple-500' },
    { nome: 'IBS Municipal', percentual: ibsm * 100, valor: valorIBSm, cor: 'bg-pink-500' },
    { nome: 'CBS', percentual: cbs * 100, valor: valorCBS, cor: 'bg-indigo-500' },
    { nome: 'IS', percentual: is * 100, valor: valorIS, cor: 'bg-orange-500' }
  ];


// Exibir resultados principais
let resultadoHTML = `
  <div class="grid grid-cols--1 sm:grid-cols-3 gap-4 mb-6">
    <div class="bg-white/10 rounded-xl px-0 py-3 text-center">
      <div class="text-xs sm:text-sm font-bold text-white mb-1 break-words">R$ ${valorBruto.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</div>
      <div class="text-white/60 text-xs">Valor Total dos Produtos</div>
    </div>
    <div class="bg-white/10 rounded-xl px-0 py-3 text-center">
      <div class="text-xs sm:text-sm font-bold text-warning mb-1 break-words">R$ ${cargaTributaria.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</div>
      <div class="text-white/60 text-xs">Carga Tributária ICMS, IPI, PIS, Cofins</div>
    </div>
    <div class="bg-white/10 rounded-xl px-0 py-3 text-center">
      <div class="text-xs sm:text-sm font-bold text-accent mb-1 break-words">R$ ${cargaTributariaLC.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</div>
      <div class="text-white/60 text-xs">Carga Tributária IBS, CBS, IS (somente informativo em 2026)</div>
    </div>
    <div class="bg-white/10 rounded-xl px-0 py-3 text-center col-span-3">
      <div class="text-xs sm:text-sm font-bold text-accent mb-1 break-words">R$ ${totalNota.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</div>
      <div class="text-white/60 text-xs">Valor Total da Nota (sem IBS, CBS, IS)</div>
    </div>
  </div>




    <div class="space-y-3">
      <h3 class="text-white font-semibold mb-4 flex items-center space-x-2">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
        </svg>
        <span>Detalhamento dos Impostos</span>
      </h3>`;

  impostos.forEach(imposto => {
  const percentualDoTotal = (imposto.valor / totalImpostos) * 100;
  if (imposto.valor > 0) {
    resultadoHTML += `
      <div class="bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors duration-200">
        <div class="flex items-center justify-between mb-2">
          <div class="flex items-center space-x-3">
            <div class="w-3 h-3 ${imposto.cor} rounded-full"></div>
            <span class="text-white font-medium">${imposto.nome}</span>
            <span class="text-white/60 text-sm">${imposto.percentual.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}%</span>
          </div>
          <span class="text-white font-semibold">R$ ${imposto.valor.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>
        </div>
        <div class="w-full bg-white/10 rounded-full h-2">
          <div class="${imposto.cor} h-2 rounded-full transition-all duration-500" style="width: ${percentualDoTotal.toFixed(2)}%"></div>
        </div>
      </div>`;
  }
});


  resultadoHTML += `</div>`;

  document.getElementById('resultado').innerHTML = resultadoHTML;
  document.getElementById('resultado').style.animation = 'slideUp 0.5s ease-out';
}

// Máscara de moeda BRL no campo valorLiquido
document.getElementById('valorLiquido').addEventListener('input', function(e) {
  let value = e.target.value;

  // Remove tudo que não for dígito
  value = value.replace(/\D/g, '');

  if (value === '') {
    e.target.value = '';
    return;
  }

  // Formata como moeda brasileira
  value = (parseInt(value, 10) / 100).toFixed(2);
  value = value.replace('.', ',').replace(/\B(?=(\d{3})+(?!\d))/g, '.');

  e.target.value = value;
});


    // Initialize with default calculation
    window.addEventListener('load', function() {
      setTimeout(calcular, 500);
    });

</script>
</body>
</html>
